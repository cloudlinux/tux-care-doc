<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ePortal API | ドキュメンテーション</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="icon" href="/favicon.ico">
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5BSW555');</script>
    <meta name="description" content="以下のコマンドで、API使用のための別のePortalアカウントを作成する必要がある場合があります。">
    <meta name="twitter:title" content="ePortal API">
    <meta name="twitter:description" content="以下のコマンドで、API使用のための別のePortalアカウントを作成する必要がある場合があります。">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:url" content="/jp/eportal-api/">
    <meta property="og:type" content="article">
    <meta property="og:title" content="ePortal API">
    <meta property="og:description" content="以下のコマンドで、API使用のための別のePortalアカウントを作成する必要がある場合があります。">
    <meta property="og:url" content="/jp/eportal-api/">
    <meta property="og:site_name" content="TuxCare Documentation">
    <meta itemprop="name" content="ePortal API">
    <meta itemprop="description" content="以下のコマンドで、API使用のための別のePortalアカウントを作成する必要がある場合があります。">
    <meta http-equiv="Content-Security-Policy" content="script-src &#39;self&#39; &#39;unsafe-inline&#39; &#39;unsafe-inline&#39; &#39;unsafe-eval&#39; *.survicate.com *.googletagmanager.com *.google-analytics.com *.licdn.com *.hotjar.com *.twitter.com *.facebook.net *.kernelcare.info *.twitter.com *.ads-twitter.com;">
    
    <link rel="preload" href="/assets/css/0.styles.55e003d6.css" as="style"><link rel="preload" href="/assets/js/app.77537ab0.js" as="script"><link rel="preload" href="/assets/js/4.fa87bcbc.js" as="script"><link rel="preload" href="/assets/js/1.8d9e0a6b.js" as="script"><link rel="preload" href="/assets/js/29.d11c7dd0.js" as="script"><link rel="prefetch" href="/assets/js/10.0598fc63.js"><link rel="prefetch" href="/assets/js/11.fbb1abbd.js"><link rel="prefetch" href="/assets/js/12.497b9334.js"><link rel="prefetch" href="/assets/js/13.cf94d2ce.js"><link rel="prefetch" href="/assets/js/14.e754d03b.js"><link rel="prefetch" href="/assets/js/15.ab56c7eb.js"><link rel="prefetch" href="/assets/js/16.e258bd7a.js"><link rel="prefetch" href="/assets/js/17.78b5c1ee.js"><link rel="prefetch" href="/assets/js/18.1fd57be1.js"><link rel="prefetch" href="/assets/js/19.09007db9.js"><link rel="prefetch" href="/assets/js/20.4b89b8f8.js"><link rel="prefetch" href="/assets/js/21.25545891.js"><link rel="prefetch" href="/assets/js/22.e6d46c39.js"><link rel="prefetch" href="/assets/js/23.314fd111.js"><link rel="prefetch" href="/assets/js/24.10dc4d08.js"><link rel="prefetch" href="/assets/js/25.d694fc98.js"><link rel="prefetch" href="/assets/js/26.e9bb0dc5.js"><link rel="prefetch" href="/assets/js/27.9fba3498.js"><link rel="prefetch" href="/assets/js/28.4df4f44e.js"><link rel="prefetch" href="/assets/js/30.c5368627.js"><link rel="prefetch" href="/assets/js/31.3b8ae5c5.js"><link rel="prefetch" href="/assets/js/32.cdf8ef30.js"><link rel="prefetch" href="/assets/js/33.54ef9298.js"><link rel="prefetch" href="/assets/js/34.ccda7460.js"><link rel="prefetch" href="/assets/js/35.bb2b236c.js"><link rel="prefetch" href="/assets/js/36.da50bda3.js"><link rel="prefetch" href="/assets/js/37.9e19726a.js"><link rel="prefetch" href="/assets/js/38.12298806.js"><link rel="prefetch" href="/assets/js/39.bdbfb0b2.js"><link rel="prefetch" href="/assets/js/40.d8cd3965.js"><link rel="prefetch" href="/assets/js/41.c134dacb.js"><link rel="prefetch" href="/assets/js/5.4855c5c6.js"><link rel="prefetch" href="/assets/js/6.e8d6a4c1.js"><link rel="prefetch" href="/assets/js/7.42124ede.js"><link rel="prefetch" href="/assets/js/8.247b8e55.js"><link rel="prefetch" href="/assets/js/9.6eee101a.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.14adddb0.js">
    <link rel="stylesheet" href="/assets/css/0.styles.55e003d6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><!----> <header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/jp/tuxcare/" class="home-link"><img src="/logo.svg" alt="ドキュメンテーション" class="logo"> <span class="site-name site-name--documentation can-hide">ドキュメンテーション</span></a> <form id="search-form" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <div class="links" style="max-width:nullpx;"><a href="https://tuxcare.com/support-portal/" target="_blank" class="btn">
      Contact Support
    </a> <!----> <a href="https://portal.tuxcare.com" target="_blank" class="btn">
      Login to TuxCare portal
    </a> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><span class="title">言語:</span> <a class="dropdown-title"><span class="text">日本語</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/eportal-api/" class="nav-link">English</a></li><li class="dropdown-item"><!----> <a href="/jp/eportal-api/" aria-current="page" class="nav-link router-link-exact-active router-link-active">日本語</a></li></ul></div></div></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><span class="title">言語:</span> <a class="dropdown-title"><span class="text">日本語</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/eportal-api/" class="nav-link">English</a></li><li class="dropdown-item"><!----> <a href="/jp/eportal-api/" aria-current="page" class="nav-link router-link-exact-active router-link-active">日本語</a></li></ul></div></div></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><!----> <ul class="sidebar-group-items"><li><div><a href="/jp/tuxcare/" class="sidebar-link link-depth-level-0">TuxCare</a></div></li><li><div class="sidebar-header sidebar-link"><div><a href="/jp/live-patching-services/" class="sidebar-link link-depth-level-0">ライブパッチ適用サービス</a></div></div><ul class="sidebar-sub-headers"><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/jp/live-patching-services/#kernelcare-enterprise" class="sidebar-link link-depth-level-1">KernelCare Enterprise</a></div></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/jp/live-patching-services/#libcare" class="sidebar-link link-depth-level-1">LibCare</a></div></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/jp/live-patching-services/#kernelcare-for-iot" class="sidebar-link link-depth-level-1">KernelCare for IOT</a></div></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/jp/live-patching-services/#qemucare" class="sidebar-link link-depth-level-1">QEMUCare</a></div></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/jp/live-patching-services/#dbcare" class="sidebar-link link-depth-level-1">DBCare</a></div></li></ul></li><li><div class="sidebar-header sidebar-link"><div><a href="/jp/eportal/" class="sidebar-link link-depth-level-0">ePortal</a></div></div><ul class="sidebar-sub-headers"><li class="collapsible sidebar-sub-header"><div><a href="/jp/eportal/#eportalハードウェア要件" class="sidebar-link link-depth-level-1">ePortalハードウェア要件</a></div></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/jp/eportal/#インストール" class="sidebar-link link-depth-level-1">インストール</a></div></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/jp/eportal/#キャッシュモード" class="sidebar-link link-depth-level-1">キャッシュモード</a></div></li><li class="collapsible sidebar-sub-header"><div><a href="/jp/eportal/#プロキシ設定" class="sidebar-link link-depth-level-1">プロキシ設定</a></div></li><li class="collapsible sidebar-sub-header"><div><a href="/jp/eportal/#認証設定" class="sidebar-link link-depth-level-1">認証設定</a></div></li><li class="collapsible sidebar-sub-header"><div><a href="/jp/eportal/#ユーザーの管理" class="sidebar-link link-depth-level-1">ユーザーの管理</a></div></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/jp/eportal/#ldapを使用した認証" class="sidebar-link link-depth-level-1">LDAPを使用した認証</a></div></li><li class="collapsible sidebar-sub-header"><div><a href="/jp/eportal/#eportalへのアクセス" class="sidebar-link link-depth-level-1">ePortalへのアクセス</a></div></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/jp/eportal/#パッチセットの展開" class="sidebar-link link-depth-level-1">パッチセットの展開</a></div></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/jp/eportal/#libcareパッチセットの展開" class="sidebar-link link-depth-level-1">LibCareパッチセットの展開</a></div></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/jp/eportal/#qemuパッチセットの展開" class="sidebar-link link-depth-level-1">QEMUパッチセットの展開</a></div></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/jp/eportal/#キーの管理" class="sidebar-link link-depth-level-1">キーの管理</a></div></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/jp/eportal/#サーバーの管理" class="sidebar-link link-depth-level-1">サーバーの管理</a></div></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/jp/eportal/#フィード管理" class="sidebar-link link-depth-level-1">フィード管理</a></div></li><li class="collapsible sidebar-sub-header"><div><a href="/jp/eportal/#特別なタグフィールドの追加" class="sidebar-link link-depth-level-1">特別なタグフィールドの追加</a></div></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/jp/eportal/#httpsを使用するようにeportalを設定する方法" class="sidebar-link link-depth-level-1">HTTPSを使用するようにePortalを設定する方法</a></div></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/jp/eportal/#高可用性" class="sidebar-link link-depth-level-1">高可用性</a></div></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/jp/eportal/#kernelcare-enterpriseの展開" class="sidebar-link link-depth-level-1">KernelCare Enterpriseの展開</a></div></li><li class="collapsible sidebar-sub-header"><div><a href="/jp/eportal/#eportalの移行" class="sidebar-link link-depth-level-1">ePortalの移行</a></div></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/jp/eportal/#データベースのバックアップ" class="sidebar-link link-depth-level-1">データベースのバックアップ</a></div></li><li class="collapsible sidebar-sub-header"><div><a href="/jp/eportal/#構成ファイル" class="sidebar-link link-depth-level-1">構成ファイル</a></div></li><li class="collapsible sidebar-sub-header"><div><a href="/jp/eportal/#停止と開始" class="sidebar-link link-depth-level-1">停止と開始</a></div></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/jp/eportal/#ログファイル" class="sidebar-link link-depth-level-1">ログファイル</a></div></li><li class="collapsible sidebar-sub-header"><div><a href="/jp/eportal/#nagiosとzabbixのサポート" class="sidebar-link link-depth-level-1">NagiosとZabbixのサポート</a></div></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/jp/eportal/#使用状況レポート" class="sidebar-link link-depth-level-1">使用状況レポート</a></div></li><li class="collapsible sidebar-sub-header"><div><a href="/jp/eportal/#カスタム環境変数" class="sidebar-link link-depth-level-1">カスタム環境変数</a></div></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/jp/eportal/#シングルサインオンによる認証" class="sidebar-link link-depth-level-1">シングルサインオンによる認証</a></div></li><li class="collapsible sidebar-sub-header"><div><a href="/jp/eportal/#カスタムパッチストレージ" class="sidebar-link link-depth-level-1">カスタムパッチストレージ</a></div></li></ul></li><li><div class="active collapsed sidebar-header sidebar-link"><div class="active"><a href="/jp/eportal-api/" aria-current="page" class="active sidebar-link link-depth-level-0">ePortal API</a></div></div><ul class="sidebar-sub-headers"><li class="collapsible sidebar-sub-header"><div><a href="/jp/eportal-api/#サーバーのリスト表示" class="sidebar-link link-depth-level-1">サーバーのリスト表示</a></div></li><li class="collapsible sidebar-sub-header"><div><a href="/jp/eportal-api/#ホストの登録" class="sidebar-link link-depth-level-1">ホストの登録</a></div></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/jp/eportal-api/#ホストの登録解除" class="sidebar-link link-depth-level-1">ホストの登録解除</a></div></li><li class="collapsible sidebar-sub-header"><div><a href="/jp/eportal-api/#フィードの作成-変更" class="sidebar-link link-depth-level-1">フィードの作成／変更</a></div></li><li class="collapsible sidebar-sub-header"><div><a href="/jp/eportal-api/#フィードのリスト表示" class="sidebar-link link-depth-level-1">フィードのリスト表示</a></div></li><li class="collapsible sidebar-sub-header"><div><a href="/jp/eportal-api/#フィードの削除" class="sidebar-link link-depth-level-1">フィードの削除</a></div></li><li class="collapsible sidebar-sub-header"><div><a href="/jp/eportal-api/#登録キーの作成-変更" class="sidebar-link link-depth-level-1">登録キーの作成／変更</a></div></li><li class="collapsible sidebar-sub-header"><div><a href="/jp/eportal-api/#キーのリスト表示" class="sidebar-link link-depth-level-1">キーのリスト表示</a></div></li><li class="collapsible sidebar-sub-header"><div><a href="/jp/eportal-api/#キーの削除" class="sidebar-link link-depth-level-1">キーの削除</a></div></li><li class="collapsible sidebar-sub-header"><div><a href="/jp/eportal-api/#パッチセットのリスト表示" class="sidebar-link link-depth-level-1">パッチセットのリスト表示</a></div></li><li class="collapsible sidebar-sub-header"><div><a href="/jp/eportal-api/#パッチセットの管理" class="sidebar-link link-depth-level-1">パッチセットの管理</a></div></li></ul></li><li><div class="sidebar-header sidebar-link"><div><a href="/jp/extended-lifecycle-support/" class="sidebar-link link-depth-level-0">延長ライフサイクルサポート</a></div></div><ul class="sidebar-sub-headers"><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/jp/extended-lifecycle-support/#yumリポジトリのインストール手順" class="sidebar-link link-depth-level-1">yumリポジトリのインストール手順</a></div></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/jp/extended-lifecycle-support/#elsアップデートのローカルミラーのインストールに関する説明" class="sidebar-link link-depth-level-1">ELSアップデートのローカルミラーのインストールに関する説明</a></div></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/jp/extended-lifecycle-support/#ovalデータ" class="sidebar-link link-depth-level-1">#OVALデータ</a></div></li></ul></li><li><div class="sidebar-header sidebar-link"><div><a href="/jp/extended-lifecycle-support-for-languages/" class="sidebar-link link-depth-level-0">言語向け延長ライフサイクルサポート</a></div></div><ul class="sidebar-sub-headers"><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/jp/extended-lifecycle-support-for-languages/#hp向け延長ライフサイクルサポート" class="sidebar-link link-depth-level-1">HP向け延長ライフサイクルサポート</a></div></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/jp/extended-lifecycle-support-for-languages/#python向け延長ライフサイクルサポート" class="sidebar-link link-depth-level-1">Python向け延長ライフサイクルサポート</a></div></li></ul></li><li><div class="sidebar-header sidebar-link"><div><a href="/jp/linux-support-services/" class="sidebar-link link-depth-level-0">Linuxサポートサービス</a></div></div><ul class="sidebar-sub-headers"><li class="collapsible sidebar-sub-header"><div><a href="/jp/linux-support-services/#almalinux-os-8向け「エッセンシャル」サポート" class="sidebar-link link-depth-level-1">AlmaLinux OS 8向け「エッセンシャル」サポート</a></div></li><li class="collapsible sidebar-sub-header"><div><a href="/jp/linux-support-services/#almalinux-os8とその他のlinuxディストリビューション向け「プレミアム」サポート" class="sidebar-link link-depth-level-1">AlmaLinux OS8とその他のLinuxディストリビューション向け「プレミアム」サポート</a></div></li><li class="collapsible sidebar-sub-header"><div><a href="/jp/linux-support-services/#almalinux-os-8向け製品nodeosサポート" class="sidebar-link link-depth-level-1">AlmaLinux OS 8向け製品NodeOSサポート</a></div></li></ul></li><li><div class="sidebar-header sidebar-link"><div><a href="/jp/tuxcare-cln/" class="sidebar-link link-depth-level-0">サブスクリプション管理ポータル</a></div></div><ul class="sidebar-sub-headers"><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/jp/tuxcare-cln/#概要" class="sidebar-link link-depth-level-1">概要</a></div></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/jp/tuxcare-cln/#dashboard" class="sidebar-link link-depth-level-1">Dashboard</a></div></li><li class="collapsible sidebar-sub-header"><div><a href="/jp/tuxcare-cln/#live-patching-services" class="sidebar-link link-depth-level-1">Live Patching Services</a></div></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/jp/tuxcare-cln/#extended-support-services" class="sidebar-link link-depth-level-1">Extended Support Services</a></div></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/jp/tuxcare-cln/#billing" class="sidebar-link link-depth-level-1">Billing</a></div></li><li class="collapsible sidebar-sub-header"><div class="sidebar-link-container"><a href="/jp/tuxcare-cln/#settings" class="sidebar-link link-depth-level-1">Settings</a></div></li></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="breadcrumb-wrapper page-breadcrumb" data-v-5e0e0acf><span class="breadcrumb-title" data-v-5e0e0acf>ドキュメンテーション:</span> <a href="/jp/" class="breadcrumb router-link-active" data-v-5e0e0acf>
    
  </a><a href="/jp/eportal-api/" aria-current="page" class="breadcrumb router-link-exact-active router-link-active" data-v-5e0e0acf>
    ePortal API
  </a></div> <div class="page-nav-wrapper"><div class="page-nav"><a href="/jp/eportal/" class="nav-arrow left"></a> <a href="/jp/extended-lifecycle-support/" class="nav-arrow right"></a></div></div> <div class="content content__default"><h1 id="eportal-api"><a href="#eportal-api" class="header-anchor">#</a> ePortal API</h1> <p>以下のコマンドで、API使用のための別のePortalアカウントを作成する必要がある場合があります。</p> <div class="language- extra-class"><pre class="language-text"><code>kc.eportal user -a api-user -p &lt;password&gt;
</code></pre></div><p>Basic認証を介してHTTP API資格情報を渡すことができると、SSO/LDAP設定に役立つ場合があります。</p> <p>一般に、ePortal APIは構成管理が簡単で、冪等性があります。既存の状態を確認するのに追加のリクエストを行う必要はありません。たとえば、存在しないエンティティを削除したとしても、エラーは発生しません。また、エンティティの作成／変更は、単一のリクエストで実行され、問題なく、容易にご希望の最終状態を得ることができます。</p> <h2 id="サーバーのリスト表示"><a href="#サーバーのリスト表示" class="header-anchor">#</a> サーバーのリスト表示</h2> <p><strong>GET /admin/api/servers</strong></p> <p>さまざまな基準でサーバーをフィルタリングして、リストを反復処理して、サーバー数を取得します。</p> <p>読み取り専用のユーザー権限のBasic認証が必要です。</p> <p><strong>クエリ文字列パラメータ：</strong></p> <ul><li><code>hostname</code>：String（オプション）。パターンとマッチするホスト名のサーバーを返します。パターンには、任意の文字列にマッチする%プレースホルダーを含めることができます。</li> <li><code>ip</code>：String（オプション）。パターンとマッチするIPのサーバーを返します。パターンには、任意の文字列に一致するプレースホルダーを含めることができます。</li> <li><code>feed</code>：String（オプション）。フィードに接続されたサーバーを返します。デフォルトフィードにはmainを使用してください。</li> <li><code>key</code>：String（オプション）。キーに登録されているサーバーを返します。</li> <li><code>registered_age</code>：Integer（オプション）。<code>registered_age</code>日前よりも前に登録されたサーバーを返します。<code>registered_age</code>が負の値の場合、<code>-registered_age</code>日前以降に登録されたサーバーを返します。例えば、<code>registered_age=-3</code>の場合は、3日前以降に登録されたサーバーを返すことになります。hサフィックスを追加して、時間を指定できます。<code>registered_age=4h</code>の場合は、4時間前よりも前に登録されたサーバーを選択します。</li> <li><code>checkin_age</code>：Integer（オプション）。<code>checkin_age</code>日前よりも前にチェックインを送信したサーバーを返します。負の値の場合は、<code>registered_age</code>を参照してください。</li> <li><code>updated_age</code>：Integer（オプション）。updated_age日前よりも前にパッチをロードしたサーバーを返します。負の値の場合は、<code>registered_age</code>を参照してください。</li> <li><code>is_updated</code>：Boolean（オプション）。<code>true</code>の場合、利用可能な最新のパッチに更新されているサーバーを返します。<code>false</code>の場合、最新のパッチが適用されていないサーバーを返します。</li> <li><code>limit</code>：Integer（オプション）。結果を指定されたエントリ数に制限します。デフォルトでは、<code>limit</code>は10です。</li> <li><code>offset</code>：Integer（オプション）。結果を指定された開始位置に設定します。<code>limit</code>とoffsetを使用して、結果を反復処理できます。</li> <li><code>only_count</code>：Boolean（オプション）。サーバー数のみを返します。</li> <li><code>tag</code>：String（オプション）。サーバータグによるフィルターを追加します。例：<code>tag=env:test</code>または<code>tag=ubuntu</code>.</li></ul> <p><strong>応答：</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;count&quot;</span><span class="token operator">:</span> <span class="token number">42</span><span class="token punctuation">,</span>
    <span class="token property">&quot;limit&quot;</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
    <span class="token property">&quot;offset&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;result&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;99c97tz44uKX13b5&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;ip&quot;</span><span class="token operator">:</span> <span class="token string">&quot;10.51.16.72&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;hostname&quot;</span><span class="token operator">:</span> <span class="token string">&quot;localhost.localdomain&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;key&quot;</span><span class="token operator">:</span> <span class="token string">&quot;some-key&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;feed&quot;</span><span class="token operator">:</span> <span class="token string">&quot;main&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;registered&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2021-04-08 16:43:23.907671&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;checkin&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2021-07-12 17:35:56.065077&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;updated&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2021-06-01 16:37:03.000000&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;euname&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3.10.0-1160.25.1.el7&quot;</span><span class="token punctuation">,</span>        <span class="token comment">// effective kernel version</span>
            <span class="token property">&quot;release&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3.10.0-957.5.1.el7.x86_64&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// installed kernel version</span>
            <span class="token property">&quot;kernel_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;9647204d2708cad906a75944ee56ac68fc5b5704&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;patch_level&quot;</span><span class="token operator">:</span> <span class="token number">49</span><span class="token punctuation">,</span>
            <span class="token property">&quot;patch_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;default&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;tags&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
            <span class="token property">&quot;uptime&quot;</span><span class="token operator">:</span> <span class="token number">6394092</span><span class="token punctuation">,</span>
            <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#1 SMP Fri Feb 1 14:54:57 UTC 2019&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;virt&quot;</span><span class="token operator">:</span> <span class="token string">&quot;kvm&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;kcare_version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2.44-2&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;distro&quot;</span><span class="token operator">:</span> <span class="token string">&quot;CentOS Linux&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;distro_version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;7.6.1810&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;machine&quot;</span><span class="token operator">:</span> <span class="token string">&quot;x86_64&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;processor&quot;</span><span class="token operator">:</span> <span class="token string">&quot;x86_64&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        ...
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="ホストの登録"><a href="#ホストの登録" class="header-anchor">#</a> ホストの登録</h2> <p><strong>POST /admin/api/register</strong></p> <p>指定されたキーとホスト名でホストを登録します。</p> <p><strong>フォーム（URLエンコードされた）パラメータ：</strong></p> <ul><li><code>key</code>：String（必須）。登録に使用するePortalキー。</li> <li><code>hostname</code>：String（オプション）。使用するサーバーのホスト名。</li></ul> <p><strong>成功した場合の応答（200）：</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;server_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;some-server-id&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>エラーの場合の応答（400）：</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;error&quot;</span><span class="token operator">:</span> <span class="token string">&quot;error code&quot;</span> # invalid-key | key-limit-reached
<span class="token punctuation">}</span>
</code></pre></div><p><strong>例：</strong></p> <div class="language- extra-class"><pre class="language-text"><code>curl -X POST https://eportal.corp.com/admin/api/register -F key=test
{&quot;server_id&quot;:&quot;lw1MO1Du5sF3Cj39&quot;}
</code></pre></div><h2 id="ホストの登録解除"><a href="#ホストの登録解除" class="header-anchor">#</a> ホストの登録解除</h2> <p><strong>POST /admin/api/delete_server</strong></p> <p>IPまたはホスト名で登録済みサーバーを削除します。</p> <p>管理者ユーザー権限によるBasic認証が必要です。</p> <p><strong>クエリ文字列パラメータ：</strong></p> <ul><li><code>hostname</code>：String（オプション）。削除するサーバーのホスト名。</li> <li><code>ip</code>：String（オプション）。削除するサーバーのIP。</li></ul> <p>エンドポイントには、少なくとも1つのパラメータ（ホスト名またはIP）が必要です。</p> <p><strong>応答：</strong></p> <p>応答には、削除されたサーバー数が含まれています。</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;result&quot;</span><span class="token operator">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre></div><p>例えば、</p> <div class="language- extra-class"><pre class="language-text"><code>curl --user admin:admin-password -X POST https://eportal.corp.com/admin/api/delete_server?ip=192.168.1.1
</code></pre></div><p>以下は、さまざまなCM製品で<code>/admin/api/delete_server</code>エンドポイントを使用する例です。注意：API経由で削除するには、ホストIPまたはホスト名が必要です。以下の方法のいずれかを使用する方が便利です。</p> <ul><li>（稼働している）ホストへのアクセス権がある場合、<code>kcarectl --unregister</code>を呼び出してホストを削除する方がはるかに簡単です。</li> <li>ホストがすでに破棄されている場合は、一括で<a href="#clean-inactive-servers">非アクティブサーバーのクリーンアップ</a>を使用することを検討できます。</li></ul> <h3 id="ansible-playbook"><a href="#ansible-playbook" class="header-anchor">#</a> Ansible playbook</h3> <p>ePortal APIアクセスをAnsibleと統合できるようになりました。kernelcareエージェントを呼び出してタスクを実行する代わりに、ePortalを直接呼び出して同じ結果を得ることができます。</p> <p>API Playbookを使用して、KernelCareエージェントを登録解除します。</p> <div class="language-json extra-class"><pre class="language-json"><code>- hosts<span class="token operator">:</span> kernelcare
  vars<span class="token operator">:</span>
    eportal_srv<span class="token operator">:</span> http<span class="token operator">:</span><span class="token comment">//eportal.address.here[:port if needed]</span>

  tasks<span class="token operator">:</span>
    - name<span class="token operator">:</span> unregister kernelcare agent through API
      uri<span class="token operator">:</span>
        url<span class="token operator">:</span> <span class="token string">&quot;{{ eportal_srv }}/admin/api/delete_server?ip={{ ansible_default_ipv4.address|default(ansible_all_ipv4_addresses[0]) }}&quot;</span>
        method<span class="token operator">:</span> POST
        user<span class="token operator">:</span> your-api-user
        password<span class="token operator">:</span> your-api-user-password
        force_basic_auth<span class="token operator">:</span> yes
</code></pre></div><p>例えば、</p> <div class="language-json extra-class"><pre class="language-json"><code>- hosts<span class="token operator">:</span> kernelcare
  vars<span class="token operator">:</span>
    eportal_srv<span class="token operator">:</span> http<span class="token operator">:</span><span class="token comment">//192.168.246.110</span>

  tasks<span class="token operator">:</span>
    - name<span class="token operator">:</span> unregister kernelcare agent through API
      uri<span class="token operator">:</span>
        url<span class="token operator">:</span> <span class="token string">&quot;{{ eportal_srv }}/admin/api/delete_server?ip={{ ansible_default_ipv4.address|default(ansible_all_ipv4_addresses[0]) }}&quot;</span>
        method<span class="token operator">:</span> POST
        user<span class="token operator">:</span> api-user
        password<span class="token operator">:</span> dummy
        force_basic_auth<span class="token operator">:</span> yes
</code></pre></div><p>以下のコマンドをアドホック実行します。</p> <div class="language- extra-class"><pre class="language-text"><code>ansible-playbook -u ansible  ./kernelcare.yml
</code></pre></div><p>マシンのティアダウン中にこのコマンドを呼び出して、ePortalから適切にサーバーを削除できます。</p> <h3 id="chefのrecipe"><a href="#chefのrecipe" class="header-anchor">#</a> Chefのrecipe</h3> <p>Chefのような自動化ツールとより緊密に統合することは、KernelCareとePortalのような関連ツールにとって常に目標でした。以下のrecipeは、delete_server APIを使用して、ティアダウン中にePortalから正確にサーバーを削除する方法を示しています。このrecipeは、他のrecipeと統合して、手動操作を回避できます。</p> <p>APIを使用して、KernelCareエージェントを登録解除するrecipe：</p> <div class="language-json extra-class"><pre class="language-json"><code>eportal_url = <span class="token string">&quot;EPORTAL URL&quot;</span>
eportal_user = <span class="token string">&quot;EPORTAL API USER NAME&quot;</span>
eportal_password = <span class="token string">&quot;EPORTAL API USER PASSWORD&quot;</span>

# the ip to unregister can be pulled automatically from the system where the recipe is applied<span class="token punctuation">,</span> or specified manually (by replacing the following line with a simple assignment)
ip_to_unregister = <span class="token string">&quot;#{node['network']['interfaces'][node['network']['default_interface']]['addresses'].select{|k,v| v['family'] == &quot;</span>inet<span class="token string">&quot;}.keys.first}&quot;</span>


http_request <span class="token string">&quot;kernelcare-unregister-api&quot;</span> do
  url <span class="token string">&quot;#{eportal_url}/admin/api/delete_server?ip=#{ip_to_unregister}&quot;</span>
  action <span class="token operator">:</span>post
  headers(<span class="token punctuation">{</span>'AUTHORIZATION' =&gt; &quot;Basic #<span class="token punctuation">{</span>
    Base64.encode64(<span class="token string">&quot;#{eportal_user}:#{eportal_password}&quot;</span>)<span class="token punctuation">}</span>&quot;<span class="token punctuation">,</span>
  <span class="token punctuation">}</span>)
end
</code></pre></div><p>例（kernelcare-unregister-api.rb）：</p> <div class="language-json extra-class"><pre class="language-json"><code>eportal_url = <span class="token string">&quot;http://192.168.246.110&quot;</span>
eportal_user = <span class="token string">&quot;api-user&quot;</span>
eportal_password = <span class="token string">&quot;dummy&quot;</span>

ip_to_unregister = <span class="token string">&quot;#{node['network']['interfaces'][node['network']['default_interface']]['addresses'].select{|k,v| v['family'] == &quot;</span>inet<span class="token string">&quot;}.keys.first}&quot;</span>

http_request <span class="token string">&quot;kernelcare-unregister-api&quot;</span> do
  url <span class="token string">&quot;#{eportal_url}/admin/api/delete_server?ip=#{ip_to_unregister}&quot;</span>
  action <span class="token operator">:</span>post
  headers(<span class="token punctuation">{</span>'AUTHORIZATION' =&gt; &quot;Basic #<span class="token punctuation">{</span>
    Base64.encode64(<span class="token string">&quot;#{eportal_user}:#{eportal_password}&quot;</span>)<span class="token punctuation">}</span>&quot;<span class="token punctuation">,</span>
  <span class="token punctuation">}</span>)
end
</code></pre></div><p>以下をアドホック実行します。</p> <div class="language- extra-class"><pre class="language-text"><code>chef-apply kernelcare-unregister-api.rb
</code></pre></div><p>出力：</p> <div class="language-json extra-class"><pre class="language-json"><code>Recipe<span class="token operator">:</span> (chef-apply cookbook)<span class="token operator">:</span><span class="token operator">:</span>(chef-apply recipe)
  * http_request<span class="token punctuation">[</span>kernelcare-unregister-api<span class="token punctuation">]</span> action post
    - http_request<span class="token punctuation">[</span>kernelcare-unregister-api<span class="token punctuation">]</span> POST to http<span class="token operator">:</span><span class="token comment">//192.168.246.110/admin/api/delete_server?ip=192.168.246.40</span>
</code></pre></div><p>マシンのティアダウン中にこのコマンドを呼び出して、ePortalから適切にサーバーを削除できます。</p> <h3 id="puppetのタスク"><a href="#puppetのタスク" class="header-anchor">#</a> Puppetのタスク</h3> <p>Puppetは、対象のシステムでタスクを実行するためのフレームワークを提供しています。以下は、そのようなタスクとして実行できるbashスクリプトで、delete_server APIを使用して、ティアダウン中にePortalから正確にサーバーを削除する方法を示しています。他の削除スクリプトやタスクと統合して、手動操作を回避できます。</p> <p>API呼び出しを介してKernelCareエージェントを登録解除します。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token assign-left variable">EPORTAL_API_USERNAME</span><span class="token operator">=</span><span class="token operator">&lt;</span>your ePortal api user name<span class="token operator">&gt;</span>
<span class="token assign-left variable">EPORTAL_API_PASSWORD</span><span class="token operator">=</span><span class="token operator">&lt;</span>your ePortal api user password<span class="token operator">&gt;</span>
<span class="token assign-left variable">EPORTAL_URL</span><span class="token operator">=</span><span class="token string">'your ePortal URL'</span>

<span class="token comment">#this is taken from the primary ip in the system. If awk is available, it is used, but a fallback using other common tools is also provided</span>
<span class="token keyword">if</span> <span class="token builtin class-name">hash</span> <span class="token function">awk</span> <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>/dev/null<span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token assign-left variable">IP_TO_UNREGISTER</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">ip</span> route get <span class="token number">1</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $(NF-2);exit}'</span><span class="token variable">`</span></span>     <span class="token comment"># using awk</span>
<span class="token keyword">else</span>
        <span class="token assign-left variable">IP_TO_UNREGISTER</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">ip</span> route get <span class="token number">1</span> <span class="token operator">|</span> <span class="token function">cut</span> <span class="token parameter variable">-f</span> <span class="token number">3</span> -d<span class="token string">&quot; &quot;</span><span class="token operator">|</span> <span class="token function">head</span> <span class="token parameter variable">-1</span><span class="token variable">`</span></span>        <span class="token comment"># simpler alternative for when awk is not available</span>
<span class="token keyword">fi</span>

<span class="token function">curl</span> <span class="token parameter variable">-kL</span> <span class="token parameter variable">-u</span> <span class="token string">&quot;<span class="token variable">${EPORTAL_API_PASSWORD}</span>&quot;</span><span class="token string">':'</span><span class="token string">&quot;<span class="token variable">${EPORTAL_API_PASSWORD}</span>&quot;</span> <span class="token parameter variable">-X</span> POST <span class="token string">&quot;<span class="token variable">${EPORTAL_URL}</span>&quot;</span><span class="token string">'/admin/api/delete_server?ip='</span><span class="token string">&quot;<span class="token variable">${IP_TO_UNREGISTER}</span>&quot;</span>
</code></pre></div><p>例（unregister_server.sh）：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token assign-left variable">EPORTAL_API_USERNAME</span><span class="token operator">=</span>admin
<span class="token assign-left variable">EPORTAL_API_PASSWORD</span><span class="token operator">=</span>admin
<span class="token assign-left variable">EPORTAL_URL</span><span class="token operator">=</span><span class="token string">'http://192.168.246.110'</span>

<span class="token comment">#this is taken from the primary ip in the system. If you want to pick a different one, adjust the next line.</span>
<span class="token keyword">if</span> <span class="token builtin class-name">hash</span> <span class="token function">awk</span> <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>/dev/null<span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token assign-left variable">IP_TO_UNREGISTER</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">ip</span> route get <span class="token number">1</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print $(NF-2);exit}'</span><span class="token variable">`</span></span>     <span class="token comment"># using awk</span>
<span class="token keyword">else</span>
        <span class="token assign-left variable">IP_TO_UNREGISTER</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">ip</span> route get <span class="token number">1</span> <span class="token operator">|</span> <span class="token function">cut</span> <span class="token parameter variable">-f</span> <span class="token number">3</span> -d<span class="token string">&quot; &quot;</span><span class="token operator">|</span> <span class="token function">head</span> <span class="token parameter variable">-1</span><span class="token variable">`</span></span>        <span class="token comment"># simpler alternative for when awk is not available</span>
<span class="token keyword">fi</span>

<span class="token function">curl</span> <span class="token parameter variable">-kL</span> <span class="token parameter variable">-u</span> <span class="token string">&quot;<span class="token variable">${EPORTAL_API_PASSWORD}</span>&quot;</span><span class="token string">':'</span><span class="token string">&quot;<span class="token variable">${EPORTAL_API_PASSWORD}</span>&quot;</span> <span class="token parameter variable">-X</span> POST <span class="token string">&quot;<span class="token variable">${EPORTAL_URL}</span>&quot;</span><span class="token string">'/admin/api/delete_server?ip='</span><span class="token string">&quot;<span class="token variable">${IP_TO_UNREGISTER}</span>&quot;</span>
</code></pre></div><h3 id="puppetのプラン"><a href="#puppetのプラン" class="header-anchor">#</a> Puppetのプラン</h3> <p>タスクではなくプランの作成をご希望の場合は、以下の手順でこのスクリプトから作成できます。</p> <ul><li><code>eportal_puppet</code>という新しいディレクトリを作成します</li> <li>このディレクトリ内に、以下のコマンドでboltプロジェクトを作成します<div class="language- extra-class"><pre class="language-text"><code>bolt project init
</code></pre></div></li> <li>その中にスクリプトディレクトリを作成します</li> <li>その中に上記のスクリプトを配置します（このスクリプトを<code>unregister_server.sh</code>と呼びます）</li> <li>以下を使用して、boltのプランを作成します<div class="language- extra-class"><pre class="language-text"><code>bolt plan new eportal_puppet::unregister_server --script eportal_puppet/scripts/unregister_server.sh
</code></pre></div></li> <li>これでプランができました。以下の方法で直接呼び出すことができます。<div class="language- extra-class"><pre class="language-text"><code>bolt plan run eportal_puppet:unregister_server -t &lt;TARGETS&gt;
</code></pre></div></li></ul> <p>アドホック実行の例：</p> <div class="language- extra-class"><pre class="language-text"><code>bolt plan run eportal_puppet::unregister_server -t 192.168.246.110
</code></pre></div><p>マシンのティアダウン中にこのコマンドを呼び出して、ePortalから適切にサーバーを削除できます。</p> <h2 id="フィードの作成-変更"><a href="#フィードの作成-変更" class="header-anchor">#</a> フィードの作成／変更</h2> <p><strong>POST /admin/api/feeds/</strong></p> <p>フィードが既に存在する場合は、リクエストによってフィードが変更されます。</p> <p>書き込み権限が必要で、Basic認証を受け入れます。</p> <p><strong>クエリ文字列／フォーム／JSONパラメータ：</strong></p> <ul><li><code>name</code>：String（必須）。作成または変更されたフィードの名前。</li> <li><code>auto</code>：Boolean（オプション）。自動更新プロパティを設定します。デフォルトでは、falseです。</li> <li><code>deploy_after</code>：Integer（オプション）。遅延期間を時間単位で設定します。デフォルトでは、0（遅延なし）です。</li></ul> <p><strong>応答：</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;result&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test-feed&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;auto&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;deploy_after&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>例：</strong></p> <div class="language- extra-class"><pre class="language-text"><code>curl -X POST -u admin -d name=test-feed -d auto=true https://eportal.corp.com/admin/api/feeds/
</code></pre></div><h2 id="フィードのリスト表示"><a href="#フィードのリスト表示" class="header-anchor">#</a> フィードのリスト表示</h2> <p><strong>GET /admin/api/feeds/</strong></p> <p>既存のフィードのリストを返します。注意：<code>main</code>フィードは常に存在し、変更できません。</p> <p>読み取り権限が必要で、Basic認証を受け入れます。</p> <p><strong>応答：</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;result&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;auto&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token property">&quot;deploy_after&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;feed-name&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    ...
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>例：</strong></p> <div class="language- extra-class"><pre class="language-text"><code>curl -u admin https://eportal.corp.com/admin/api/feeds/
</code></pre></div><h2 id="フィードの削除"><a href="#フィードの削除" class="header-anchor">#</a> フィードの削除</h2> <p><strong>DELETE /admin/api/feeds/:feed-name</strong></p> <p>書き込み権限が必要で、Basic認証を受け入れます。</p> <p><strong>応答：</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;result&quot;</span><span class="token operator">:</span> <span class="token number">1</span>  <span class="token comment">// number of deleted records, 0 if there is no such feed.</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>例：</strong></p> <div class="language- extra-class"><pre class="language-text"><code>curl -X DELETE -u admin https://eportal.corp.com/admin/api/feeds/test-feed
</code></pre></div><h2 id="登録キーの作成-変更"><a href="#登録キーの作成-変更" class="header-anchor">#</a> 登録キーの作成／変更</h2> <p><strong>POST /admin/api/keys/</strong></p> <p>キーがすでに存在する場合は、リクエストによってキーが変更されます。</p> <p>書き込み権限が必要で、Basic認証を受け入れます。</p> <p><strong>クエリ文字列／フォーム／JSONパラメータ：</strong></p> <ul><li><code>key</code>：String（オプション）。作成または変更されたキーの名前。空の場合は、ランダムキーが生成されます。</li> <li><code>feed</code>：String（オプション）。接続されたフィードの名前。デフォルトでは、<code>main</code>です。</li> <li><code>note</code>：String（オプション）。キーの説明。</li> <li><code>server_limit</code>：Integer（オプション）。キーに登録できる最大ホスト数の推奨制限。</li></ul> <p><strong>応答：</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;result&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;key&quot;</span><span class="token operator">:</span> <span class="token string">&quot;key&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;feed&quot;</span><span class="token operator">:</span> <span class="token string">&quot;feed-name&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;note&quot;</span><span class="token operator">:</span> <span class="token string">&quot;some-note&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;server_limit&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>例：</strong></p> <div class="language- extra-class"><pre class="language-text"><code>curl -X POST -u admin -d key=test-key -d feed=test-feed https://eportal.corp.com/admin/api/keys/
</code></pre></div><h2 id="キーのリスト表示"><a href="#キーのリスト表示" class="header-anchor">#</a> キーのリスト表示</h2> <p><strong>GET /admin/api/keys/</strong></p> <p>既存のキーのリストを返します。</p> <p>読み取り権限が必要で、Basic認証を受け入れます。</p> <p><strong>応答：</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;result&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;key&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;feed&quot;</span><span class="token operator">:</span> <span class="token string">&quot;main&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;note&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
      <span class="token property">&quot;server_limit&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    ...
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>例：</strong></p> <div class="language- extra-class"><pre class="language-text"><code>curl -u admin https://eportal.corp.com/admin/api/keys/
</code></pre></div><h2 id="キーの削除"><a href="#キーの削除" class="header-anchor">#</a> キーの削除</h2> <p><strong>DELETE /admin/api/keys/:key</strong></p> <p>書き込み権限が必要で、Basic認証を受け入れます。</p> <p><strong>応答：</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;result&quot;</span><span class="token operator">:</span> <span class="token number">1</span>  <span class="token comment">// number of deleted records, 0 if there is no such key.</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>例：</strong></p> <div class="language- extra-class"><pre class="language-text"><code>curl -X DELETE -u admin https://eportal.corp.com/admin/api/keys/test-key
</code></pre></div><h2 id="パッチセットのリスト表示"><a href="#パッチセットのリスト表示" class="header-anchor">#</a> パッチセットのリスト表示</h2> <p><strong>GET /admin/api/patchsets/</strong></p> <p>エンドポイントには、フィードと製品で利用可能なパッチセットがリスト表示されます。最も古いパッチセットから最も新しいパッチセットの順に表示されます。</p> <p>読み取り権限が必要で、Basic認証を受け入れます。</p> <p><strong>クエリ文字列パラメータ：</strong></p> <ul><li><code>feed</code>：String（オプション）。パッチセットをリスト表示するフィードの名前。デフォルトでは、<code>main</code>です。</li> <li><code>product</code>：String（オプション）。可能な値は、<code>kernel</code>、<code>user</code>、<code>qemu</code>、dbです。指定された製品のパッチストアを選択します。デフォルトでは、<code>kernel</code>です。</li></ul> <p><strong>応答：</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;result&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;patchset&quot;</span><span class="token operator">:</span> <span class="token string">&quot;patchset-name&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;status&quot;</span><span class="token operator">:</span> <span class="token string">&quot;enabled&quot;</span> <span class="token comment">// possible values are: enabled, disabled, not-downloaded, undeployed</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    ...
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>例：</strong></p> <div class="language- extra-class"><pre class="language-text"><code>curl -u admin 'https://eportal.corp.com/admin/api/patchsets/?feed=main&amp;product=kernel'
</code></pre></div><h2 id="パッチセットの管理"><a href="#パッチセットの管理" class="header-anchor">#</a> パッチセットの管理</h2> <p><strong>POST /admin/api/patchsets/manage</strong></p> <p>パッチセットでデプロイアクションの実行を許可します。</p> <p>書き込み権限が必要で、Basic認証を受け入れます。</p> <p><strong>クエリ文字列パラメータ：</strong></p> <ul><li><code>patchset</code>：String（必須）。操作するパッチセットの名前。</li> <li><code>feed</code>：String（必須）。操作するフィードの名前。複数回指定できます。</li> <li><code>action</code>：String（必須）。実行する操作：
<ul><li><code>enable</code>：指定したパッチセットを有効にします。</li> <li><code>disable</code>：指定したパッチセットを無効にします。</li> <li><code>enable-upto</code>：指定されたパッチセットまでの（より古い）すべてのパッチセットを有効にします。</li> <li><code>undeploy-downto</code>：指定されたパッチセットまでの（より新しい）すべてのパッチセットをアンデプロイします。</li></ul></li> <li><code>product</code>：String（オプション）。可能な値は、<code>kernel</code>、<code>user</code>、<code>qemu</code>、<code>db</code>です。指定された製品のパッチストアを選択します。デフォルトでは、kernelです。</li></ul> <p><strong>応答：</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;result&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ok&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>例：</strong></p> <p>mainフィードとtest-feedフィードで、libcareパッチセット<code>U20200506_01</code>を有効にします。</p> <div class="language- extra-class"><pre class="language-text"><code>curl -X POST -u admin 'https://eportal.corp.com/admin/api/patchsets/manage?patchset=U20200506_01&amp;feed=main&amp;feed=test-feed&amp;product=user&amp;action=enable'
</code></pre></div></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/cloudlinux/tux-care-doc/edit/dev/docs/jp/eportal-api/README.md" target="_blank" rel="noopener noreferrer">編集</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></div> <div class="back-to-top" data-v-c64d4a1e><a class="nav-arrow top back-to-top__link" data-v-c64d4a1e></a></div> </div> <div class="footer" data-v-671babf6><div data-v-671babf6><a href="https://cloudlinux.com" data-v-671babf6><img src="/assets/img/we-are-cloudlinux.783ed390.svg" alt="We are Cloudlinux" data-v-671babf6></a></div> <div class="footer-company-title" data-v-671babf6>2023. CloudLinux Inc</div> <div data-v-671babf6><div data-v-671babf6><a href="https://tuxcare.com/faq/" target="_blank" data-v-671babf6>よく寄せられる質問</a></div><div data-v-671babf6><a href="hhttps://tuxcare.com/support-portal/" target="_blank" data-v-671babf6>サポート</a></div><div data-v-671babf6><a href="https://blog.tuxcare.com/" target="_blank" data-v-671babf6>ブログ</a></div></div> <div class="social" data-v-671babf6><span class="footer-social-text" data-v-671babf6>連絡を取り合う</span> <a href="https://www.facebook.com/TuxCare" target="_blank" data-v-671babf6><img src="/fb.png" class="footer-social-logo" data-v-671babf6></a><a href="https://twitter.com/TuxCare_" target="_blank" data-v-671babf6><img src="/tw.png" class="footer-social-logo" data-v-671babf6></a><a href="https://www.linkedin.com/showcase/tuxcare" target="_blank" data-v-671babf6><img src="/in.png" class="footer-social-logo" data-v-671babf6></a><a href="https://www.youtube.com/channel/UCr4GTupdSlC33wfwAGk3jsA/%20Fa" target="_blank" data-v-671babf6><img src="/ytube.png" class="footer-social-logo" data-v-671babf6></a></div></div> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.77537ab0.js" defer></script><script src="/assets/js/4.fa87bcbc.js" defer></script><script src="/assets/js/1.8d9e0a6b.js" defer></script><script src="/assets/js/29.d11c7dd0.js" defer></script>
  </body>
</html>
